<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Архітектура комп'ютерів</title>
	<link href="../style/style.css" rel="stylesheet">
	<link rel="shortcut icon" href="../img/favicon.ico" />
	<script src="../js/jquery-3.2.1.min.js"></script>
	<script src="../js/JavaScript.js" type="text/javascript" ></script>
</head>
<body class="body">
	<div class="wrapper clearfix">
		<header class="header">
			<nav class="menu">
				<ul>
					<li><a href="CPU.html">Енциклопедія</a></li>
					<li><a href="index_CPU.html">Побудова ЦП</a></li>
					<li><a href="motherboard.html">Мат. плата</a></li>
					<li><a href="x86.html">X86</a></li>
					<li><a href="index_PG_CPU.html">Програмна модель ЦП</a></li>
				</ul>
				<form>
					<input type="text" id="text-to-find" value="">
					<button type="submit" onclick="javascript: FindOnPage('text-to-find'); return false;" value="Пошук"></button>
				</form>
			</nav>
		</header>
		<main class="content">
			<div class="pad">
				<div class="in-cont-nav">
					<p>Зміст</p>
					<ul>
						<li><a href="#1">1. Структура центрального процесора</a></li>
						<li><a href="#2">2. Мікропроцесорна пам'ять</a></li>
						<li><a href="#2.1" class="mar5">2.1. Регістр лічильника команд</a></li>
						<li><a href="#2.2" class="mar5">2.2. Регістр ознак</a></li>
					</ul>
				</div>
			</div>	
			<div class="main-text">
				<h1>Програмна модель центрального процесора</h1>
				<p><i>Центральний процесор (ЦП)</i> - пристрій, безпосередньо призначене для виконання обчислювальних операцій. Процесор працює під управлінням програми, виконуючи обчислення або приймаючи логічні рішення, необхідні для обробки інформації.</p>
				<h2><a name="1"></a>Структура центрального процесора</h2>
				<p>Функціонально центральний процесор можна розділити на дві частини:</p>
				<ul class="ul"><li>операційну, яка містить арифметично-логічний пристрій (АЛП) і мікропроцесорну пам'ять (МПП) - регістри загального призначення;</li>
				<li>інтерфейсну, що містить адресні регістри, пристрій керування, регістри пам'яті для зберігання кодів команд, які виконуються в найближчі такти; схеми управління шиною і портами.</li></ul>
				<figure class="middle">
					<img src="../img/cpu1.png" alt="" height="" width="">
				</figure>
				<p>Обидві частини ЦП працюють паралельно, причому інтерфейсна частина випереджає операційну, так що вибірка чергової команди з пам'яті (її запис в блок регістрів команд і попередній аналіз) відбувається під час виконання операційної частиною попередньої команди. Така організація ЦП дозволяє істотно підвищити його ефективну швидкодію.</p>
				<p><i>Пристрій керування</i> (ПК) виробляє керуючі сигнали, що надходять по кодовою шинам інструкцій в інші блоки обчислювальної машини. ПК формує керуючі сигнали для виконання команд центрального процесора.</p>
				<p><i>Арифметично-логічний пристрій</i> (АЛП) призначений для виконання арифметичних і логічних операцій перетворення інформації.</p>
				<p><i>Системна шина</i> - набір провідників, по яких передаються сигнали, що з'єднує процесор з іншими компонентами на системній платі. Системна шина складається з шини даних, шини адреси, шини управління.</p>
				<ul class="ul"><li><i>Шина даних</i> - служить для пересилання даних між процесором і оперативним запам'ятовуючим пристроєм (ОЗП).</li><li><i>Шина адреси</i> - використовується для передачі сигналів, за допомогою яких визначається розташування осередку пам'яті для виконуваних процесором операцій читання/запису і введення-виведення.</li><li><i>Шина управління</i> - служить для пересилання керуючих сигналів. Кожна лінія цієї шини має своє особливе призначення, тому вони можуть бути як односпрямованим, так і двонаправленими.</li></ul>
				<h2><a name="2"></a>Мікропроцесорна пам'ять</h2>
				<p>Мікропроцесорна пам'ять являє собою набір регістрів, які умовно можна розділити на 4 групи:</p>
				<ul class="ul"><li>регістри загального призначення;</li><li>сегментні регістри;</li><li>регістр лічильника команд;</li><li>регістр ознак.</li></ul>
				<p><i>Регістр</i> - пристрій надшвидкодіючої пам'яті в процесорі, що служить для тимчасового зберігання керуючої інформації, операндів та/або результатів виконуваних операцій. Сукупність регістрів процесора називається <i>набором регістрів</i>.</p>
				<p><b>Набір регістрів загального призначення</b> 32-бітної архітектури центрального процесора включає в себе</p>
				<ul class="ul"><li>4 універсальних регістра: EAX, EBX, ECX, EDX;</li><li>2 індексних регістра: ESI, EDI;</li><li>2 регістра для роботи зі стеком: ESP, EBP.</li></ul>
				<figure class="middle">
					<img src="../img/reg11.png" alt="" height="" width="">
				</figure>
				<p>Кожен з 32-розрядних <b>універсальних регістрів</b> являє собою логічне об'єднання, що дозволяє окремо звертатися до своєї молодшої 16-розрядної частини: AX, BX, CX, DX. Кожен 16-розрядний регістр позволяeт незалежно звертатися до старшого (H) і молодшого (L) байту. Відповідні 8-розрядні регістри мають імена AH, AL, BH, BL, CH, CL, DH, DL.</p>
				<figure class="middle">
					<img src="../img/reg21.png" alt="" height="" width="">
				</figure>
				<p><i>Регістр EAX</i> (акумулятор) - автоматично застосовується при операціях множення, ділення і при роботі з портами введення-виведення. Його використання в арифметичних, логічних і деяких інших операціях дозволяє збільшити швидкість їх виконання. Використовує для запису значення, що повертається з процедури.</p>
				<p><i>Регістр EBX</i> (реєстр бази) - може містити адреси елементів оперативної пам'яті. За замовчуванням ці адреси будуть являти собою зсув у сегменті даних.</p>
				<p><i>Регістр ECX</i> (лічильник) - використовується в операціях повторення, наприклад в циклах, в строкових командах і т.д.</p>
				<p><i>Регістр EDX</i> (реєстр даних) - є єдиним елементом, який може зберігати адреси портів введення-виведення в командах типу IN (отримати з порту) і OUT (вивести в порт). Без його допомоги неможливо звернутися до портів з адресами в адресному просторі більше 1 байта. Автоматично застосовується також в операціях множення і ділення.</p>
				<p><b>Індексні регістри</b> використовуються для виконання непрямої адресації, а також автоматично використовуються в строкових командах. Кожен 32-розрядний індексний регістр являє собою логічне об'єднання, що дозволяє окремо звернутися до своєї молодшої 16-розрядної частини.</p>
				<p><i>Регістр ESI</i> (реєстр індексу джерела) може містити адреси елементів в оперативній пам'яті. За замовчуванням ці адреси будуть являти собою зсув у сегменті даних. При виконанні операцій з рядками в цьому регістрі міститься зсув рядка джерела в сегменті даних.</p>
				<p><i>Регістр EDI</i> (реєстр індексу приймача) може містити адреси елементів в оперативній пам'яті. За замовчуванням ці адреси будуть являти собою зсув у сегменті даних. При виконанні операцій з рядками в цьому регістрі міститься зсув рядка приймача в сегменті даних.</p>
				<figure class="middle">
					<img src="../img/regi.png" alt="" height="" width="">
				</figure>
				<p><b>Регістри для роботи зі стеком</b> використовуються для зберігання вершини стека (ESP) і поточного елемента (бази) - EBP. Кожен 32-розрядний регістр для роботи зі стеком є логічне об'єднання, що дозволяє окремо звернутися до своєї молодшої 16-розрядної частини.</p>
				<p><i>Регістр EBP</i> (покажчик бази) може містити адреси елементів в оперативній пам'яті. Ці адреси будуть являти собою зсув у сегменті стека.</p>
				<p><i>Регістр ESP</i> (покажчик стека) використовується для запису даних в стек і читання їх з стека. Фактично він містить зміщення в сегменті стека, яке визначає потрібне слово пам'яті. Значення цього регістру автоматично змінюються командами для роботи зі стеком типів push, pop, pushf, popf, call, ret.</p>
				<figure class="middle">
					<img src="../img/regs.png" alt="" height="" width="">
				</figure>
				<p><b>Сегментні регістри</b> представляють собою набір 16-розрядних регістрів (для 32-бітної архітектури центрального процесора).</p>
				<p><i>Сегмент</i> - це логічний елемент програми, який представляє собою незалежний, підтримуваний на апаратному рівні блок пам'яті.</p>
				<figure class="middle">
					<img src="../img/reg4.png" alt="" height="" width="">
				</figure>	
				<p><i>Регістр CS</i> (регістр сегменту коду) визначає стартовий адрес сегмента, в який поміщається код виконуваної програми. Це єдиний сегментний регістр, який не можна завантажити безпосередньо. Побічно завантажити в регістр CS нове значення можуть команди виду jxx, call, int, ret, iret.</p>
				<p><i>Регістр DS</i> (реєстр сегмента даних) визначає стартову адресу сегмента, в який поміщаються дані для програми. За замовчуванням зміщення в сегменті даних задається в регістрах EBX, ESI і EDI.</p>
				<p><i>Регістр SS</i> (реєстр сегмента стека) визначає стартову адресу сегмента, в який поміщається стек для програми. За замовчуванням зміщення для сегмента стека задаються в регістрах ESP і EBP.</p>
				<p><i>Регістри ES, FS, GS</i> (регістри сегментів додаткових даних) визначають стартову адресу сегмента, в який поміщаються додаткові дані для програми. Наприклад, в разі строкових команд, DS визначає сегмент для рядка-джерела, а ES - сегмент для рядка-приймача. За винятком строкових команд, доступ до даних в сегменті ES зазвичай менш ефективний, ніж в сегменті DS.</p>
				<h4 class="h-left"><a name="2.1"></a>Регістр лічильника команд</h4>	 
				<p><i>Регістр EIP</i> (покажчик команд) містить зміщення в сегменті коду наступної виконуваної команди. Як тільки деяка команда починає виконуватися, значення регістра EIP збільшується на її довжину так, що буде адресувати наступну команду. Фізична адреса команди в пам'яті виконуваної програми визначає пара регістрів CS: EIP, тобто до фізичного адреса початку сегмента коду додається зміщення наступної команди в сегменті коду, що зберігається в регістрі EIP.</p>
				<p>Зазвичай команди виконуються в тій послідовності, в якій вони розташовані в програмі. Порушують цю послідовність тільки команди переходів (вони починаються з літери j: jxx), команди виклику підпрограми (call), обробників переривань (int) і повернення (ret, iret). Безпосередньо вміст EIP не можна змінити або прочитати. Побічно завантажити в регістр EIP нового значення можуть тільки команди jxx, call, int, ret, iret. Регістр EIP є 32-бітовим. Молодша 16-бітна частина регістра лічильника команд має ім'я IP.</p>
				<h4 class="h-left"><a name="2.2"></a>Регістр ознак</h4>	 
				<p><i>Регістр ознак EFLAGS</i> включає біти, кожен з яких встановлюється в одиничний або в нульовий стан при певних умовах. Регістр EFLAGS 32-бітний. Молодша 16-бітна частина регістра ознак має ім'я FLAGS.</p>
				<figure class="middle">
					<img src="../img/reg_eflags.png" alt="" height="" width="">
				</figure>
				<p>Всі біти регістра ознак поділяються на:</p>
				<ul class="ul"><li>s - біти стану (STATUS);</li><li>c - біти управління (CONTROL);</li><li>x - системні біти (SYSTEM).</li></ul>
				<figure class="middle">
					<img src="../img/reg5.png" alt="" height="" width="">
				</figure>
				<p>CF - біт перенесення: встановлюється в 1, коли арифметична операція генерує перенесення або вихід за розрядну сітку результату. скидається в 0 в іншому випадку. Цей прапор показує стан переповнення для беззнакових цілочисельних арифметичних дій. Він також використовується в арифметичних діях з підвищеною точністю. Може бути встановлений командою STC або скинутий командою CLC.</p>
				<p>PF - біт парності: встановлюється в 1, якщо результат останньої операції має парне число одиниць.</p>
				<p>AF - біт допоміжного переносу: встановлюється в 1, якщо арифметична операція генерує перенесення з молодшої тетради бітів (з 3 біта в 4), скидається в 0 в іншому випадку. Цей прапор використовується в двійковій-десяткового арифметиці.</p>
				<p>ZF - біт нульового значення: встановлюється в 1, якщо результат нульовий, скидається в 0 в іншому випадку.</p>
				<p>SF - знаковий біт: встановлюється рівним старшому біту результату, який визначає знак в знакових цілочисельних операціях (0 - позитивне число, 1 - негативне число).</p>
				<p>TF - біт покрокового налагодження: встановлюється в 1 для включення режиму покрокового налагодження програми, скидається в 0 в іншому випадку.</p>
				<p>IF - біт переривань: при значенні 1 мікропроцесор реагує на зовнішні апаратні переривання по входу INTR. При значенні 0 мікропроцесор ігнорує зовнішні переривання.</p>
				<p>DF - біт напрямку: управляє строковими командами (MOVS, CMPS, SCAS, LODS, STOS). Якщо DF = 1 (команда STD), то вміст індексних регістрів ESI, EDI збільшується, якщо DF = 0 (команда CLD), то вміст індексних регістрів ESI, EDI зменшується.</p>
				<p>OF - біт переповнення: встановлюється в 1, якщо цілочисельний результат виходить за межі розрядної сітки. Тим самим даний біт вказує на втрату старшого біта результату.</p>
				<p>IOPL - рівень пріоритету: 2-бітове поле, яке відображає рівень пріоритету введення-виведення для виконуваної в даний час програми або завдання. Дійсний пріоритет завдання може бути менше або дорівнює IOPL.</p>
				<p>NT - прапор вкладеного завдання: управляє послідовністю викликаних і прирівняних завдань. Встановлено в 1, якщо поточна задача пов'язана з попередньою, скинутий в 0, якщо поточна задача не пов'язана з іншими завданнями.</p>
				<p>RF - прапор відновлення: використовується при обробці переривань від регістрів налагодження.</p>
				<p>VM - прапор віртуального 8086: ознака роботи процесора в режимі віртуального 8086: 1 - процесор працює в режимі віртуального 8086, 0 - процесор працює в реальному або захищеному режимі.</p>
				<p>AC - прапор контролю вирівнювання: призначений для дозволу контролю вирівнювання при зверненнях до пам'яті. Якщо потрібно контролювати вирівнювання даних і команд за адресами, кратним 2 або 4, то установка даних бітів приведе до того, що всі звернення по некратними адресами будуть викликати виняткову ситуацію.</p>
				<p>VIF - прапор віртуального переривання: при певних умовах (одне з яких - робота мікропроцесора в V-режимі) є аналогом прапора IF. Прапор VIF використовується спільно з прапором VIP.</p>
				<p>VIP - прапор відкладеного віртуального переривання: встановлюється в 1 для індикації відкладеного переривання. Використовується спільно з VIF в віртуальному режимі.</p>
				<p>ID - прапор підтримки ідентифікації процесора: використовується для відображення підтримки мікропроцесором інструкції CPUID.</p>
			</div>	  
		</main>
		<footer class="footer"><div>© 2017 Боровик М.В.</div></footer>
	</div>
	<a href="#" class="scrollup">Scroll</a> 
</body>
</html>