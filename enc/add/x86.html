<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8" />
	<title>Архітектура комп'ютерів</title>
	<link href="../style/style.css" rel="stylesheet">
	<link rel="shortcut icon" href="../img/favicon.ico" />
	<script src="../js/jquery-3.2.1.min.js"></script>
	<script src="../js/JavaScript.js" type="text/javascript" ></script>
</head>
<body class="body">
	<div class="wrapper clearfix">
		<header class="header">
			<nav class="menu">
				<ul>
					<li><a href="CPU.html">Енциклопедія</a></li>
					<li><a href="index_CPU.html">Побудова ЦП</a></li>
					<li><a href="motherboard.html">Мат. плата</a></li>
					<li><a href="x86.html">X86</a></li>
					<li><a href="index_PG_CPU.html">Програмна модель ЦП</a></li>
				</ul>
				<form>
					<input type="text" id="text-to-find" value="">
					<button type="submit" onclick="javascript: FindOnPage('text-to-find'); return false;" value="Пошук"></button>
				</form>
			</nav>
		</header>
		<main class="content">
			<div class="pad">
				<div class="in-cont-nav">
					<p>Зміст</p>
					<ul>
						<li><a href="#1">1 Історія</a></li>
						<li><a href="#2">2 Процесори</a></li>
						<li><a href="#2.1" class="mar5">2.1 Процесори Intel</a></li>
						<li><a href="#2.1.1" class="mar10">2.1.1 8086</a></li>
						<li><a href="#2.1.2" class="mar10">2.1.2 8088</a></li>
						<li><a href="#2.1.3" class="mar10">2.1.3 80386(i386)</a></li>
						<li><a href="#2.1.4" class="mar10">2.1.4 80486(i486)</a></li>
						<li><a href="#2.1.5" class="mar10">2.1.5 Pentium (i586)</a></li>
						<li><a href="#2.1.6" class="mar10">2.1.6 Pentium II (i686)</a></li>
						<li><a href="#2.1.7" class="mar10">2.1.7 Celeron</a></li>
						<li><a href="#2.1.8" class="mar10">2.1.8 Pentium III (i686)</a></li>
						<li><a href="#2.1.9" class="mar10">2.1.9 Pentium 4</a></li>
						<li><a href="#2.1.10" class="mar10">2.1.10 Core/Core 2</a></li>
						<li><a href="#2.1.11" class="mar10">2.1.11 Core i7/Core i5/Core i3</a></li>
						<li><a href="#2.1.12" class="mar10">2.1.12 Xeon</a></li>
						<li><a href="#2.2" class="mar5">2.2. Процесори AMD</a></li>
						<li><a href="#2.2.1" class="mar10">2.2.1 Am8086/88/186-486</a></li>
						<li><a href="#2.2.2" class="mar10">2.2.2 K6</a></li>
						<li><a href="#2.2.3" class="mar10">2.2.3 Athlon</a></li>
						<li><a href="#2.2.4" class="mar10">2.2.4 Athlon 64</a></li>
						<li><a href="#2.2.5" class="mar10">2.2.5 Athlon 64 X2</a></li>
						<li><a href="#2.2.6" class="mar10">2.2.6 Phenom</a></li>
						<li><a href="#2.2.7" class="mar10">2.2.7 Phenom II</a></li>
						<li><a href="#2.2.8" class="mar10">2.2.8 Athlon II</a></li>
						<li><a href="#2.3" class="mar5">2.3 Процесори, що випускалися в СРСР і Росії </a></li>
						<li><a href="#2.3.1" class="mar10">2.3.1 КР1810ВМ86</a></li>
						<li><a href="#2.3.2" class="mar10">2.3.2 Процесори МЦСТ</a></li>
						<li><a href="#3">3 Відомості загального характеру</a></li>
						<li><a href="#3.1" class="mar5">3.1 Поняття архітектури</a></li>
						<li><a href="#3.1.1" class="mar10">3.1.1 Архітектура як сумісність з кодом</a></li>
						<li><a href="#3.1.2" class="mar10">3.1.2 Відмінності між ядрами однієї мікроархітектури</a></li>
						<li><a href="#3.1.3" class="mar10">3.1.3 Частота роботи ядра</a></li>
						<li><a href="#3.1.4" class="mar10">3.1.4 Кодування інструкцій</a></li>
						<li><a href="#3.2" class="mar5">3.2 Дизайн</a></li>
						<li><a href="#3.2.1" class="mar10">3.2.1 64 біта</a></li>
						<li><a href="#3.2.2" class="mar10">3.2.2 Віртуалізація</a></li>
						<li><a href="#3.3" class="mar5">3.3 Режими роботи</a></li>
						<li><a href="#3.3.1" class="mar10">3.3.1 Реальний режим</a></li>
						<li><a href="#3.3.2" class="mar10">3.3.2 Лінійна адресація пам'яті</a></li>
						<li><a href="#3.3.3" class="mar10">3.3.3 Захищений режим</a></li>
						<li><a href="#3.3.4" class="mar10">3.3.4 Режим віртуального 8086</a></li>
					</ul>
				</div>
			</div>	
			<div class="main-text">
				<h1>x86</h1>
				<p>x86 (англ. Intel 80x86) - архітектура процесора c однойменним набором команд, вперше реалізована в процесорах компанії Intel. Назва утворена від двох цифр, якими закінчувалися назви процесорів Intel ранніх моделей - 8086, 80186, 80286 (i286), 80386 (i386), 80486 (i486). За час свого існування набір команд постійно розширювався, зберігаючи сумісність з попередніми поколіннями. Крім Intel архітектура також була реалізована в процесорах інших виробників: AMD, VIA, Transmeta, IDT і ін.</p>
				<h2><a name="1"></a>Історія</h2>	
				<figure class="float-right">
					<img src="../img/X86.png" alt="" width="90px" height="90px">
				</figure>
				<p>x86 - це CISC-архітектура. Доступ до пам'яті відбувається по «словам». «Слова» розміщуються за принципом little-endian, відомому також як Intel-формат. Сучасні процесори включають в себе декодери команд x86 для перетворення їх в спрощений внутрішній формат з подальшим їх виконанням.</p>
				<p>Архітектура x86 в 1978 році з першим 16-розрядним процесором Intel, 8086, представила старі 8-розрядні процесори 8080 і 8085 призначені для заміни. Хоча 8086 не був спочатку дуже успішний, була поставлена IBM в 1981 році на перший комп'ютер. Із-за величезного успіху IBM PC і його многочисленних клонів, які називаються IBM сумісними персональними комп'ютерами, архітектура x86 була протягом кількох років однією з найуспішніших архітектур процесорів в світі, і залишилася такою і в наші дні.</p>
				<h2><a name="2"></a>Процесори</h2>
				<h3><a name="2.1"></a>Процесори Intel</h3>	
				<table></table>
				<h4 class="h-left"><a name="2.1.1"></a><b>8086</b></h4>
				<figure class="float-right">
					<a href="cp_8086.html"><img src="../img/8086.jpg" alt="" width="190px" height="110px"></a>
					<figcaption>Рис. 2. Intel 8086 в корпусі DIP 40.</figcaption>
				</figure>
				<p>16-розрядний процесор Intel 8086, був створений в червні 1978 року. Спочатку працював на частотах 4,77 МГц, потім на 8 і 10 МГц. Виготовлявся за технологією 3 мкм і мав 29 000 транзисторів. (Див. Рис 2)</p>
				<h4 class="h-left"><a name="2.1.2"></a><b>8088</b></h4>
				<figure class="float-right">
					<a href="cp_8088.html"><img src="../img/8088.jpg" alt="" width="190px" height="110px"></a>
					<figcaption>Рис. 3. Intel 8088.</figcaption>
				</figure>
				<p>Трохи пізніше, в 1979 році, був розроблений Intel 8088, що який працював на тих же частотах, що і Intel 8086, але використовував 8-розрядну шину даних (внутрішня шина процесора залишилася 16-розрядної) для забезпечення більшої сумісності з наявної в той час в ходу периферією. Завдяки більш низькій ціні, широко використовувався в ранніх системах IBM PC замість 8086. (див. Рис 3)</p>
				<h4 class="h-left"><a name="2.1.3"></a><b>80386 (i386)</b></h4>	
				<p>Перший 32-розрядний процесор, працював на частотах 16-40 Мгц. З'явився в 1985 році. Знаменував собою революцію в світі процесорів x86. Основні принципи, закладені в цьому чіпі, без кардинальних змін дожили і до наших днів (за весь цей час зміни стосувалися, в основному, підвищення продуктивності, розширення набору команд, збільшення розрядності). Перші 386 процесори містили серйозну помилку, що приводить до неможливості функціонування в захищеному режимі. Виправлена версія називалася 386DX.</p>
				<p>Також випускалися дешевші процесори i386SX з урізаною до 16 біт зовнішньої шиною даних і 24-бітної шиною адреси. Для вбудованого застосування випускався і випускається процесор i386EX. Він має на кристалі послідовні порти, програмовані таймери (сумісні з Intel 8254), контролери пріоритетних переривань (сумісні з Intel 8259A) і контролери прямого доступу до пам'яті (сумісні з Intel 8237A). i386 - перший процесор, який міг використовувати кеш-пам'ять (розташовану на зовнішньому чіпі).</p>
				<h4 class="h-left"><a name="2.1.4"></a><b>80486 (i486)</b></h4>	
				<figure class="float-right">
					<a href="cp_80486.html"><img src="../img/80486.jpg" alt="" width="190px" height="190px"></a>
					<figcaption>Рис. 4. Intel 80486 (i486) DX2.</figcaption>
				</figure>
				<p>Процесор i486 (1989 рік) є вдосконаленим 386 процесором і першим скалярним процесором Intel (ряд операцій виконувалися за один такт). Мав вбудований FPU (Floating Point Unit - блок обчислень з плаваючою комою) і вперше - вбудовану кеш-пам'ять (8 Кбайт). 80486 - перший процесор Intel, для якого була застосована технологія множення частоти шини FSB (в моделях DX2-50, DX2-66, DX4-75 і DX4-100). (Див. Рис. 4) Для ноутбуків та вбудованих систем на початку 1990-х була випущена «полегшена» модифікація i486SX без вбудованого блоку FPU. Існувала також модифікація для вбудованих застосувань - i486GX. Вона представляла собою низьковольтний 486SX з шиною даних, урізаною до 16-ти біт. Корпусіровка i486GX - TQFP-176, частоти - від 16 МГц при Vcore = 2,0 В до 33 МГц при 2,7 В.</p>
				<h4 class="h-left"><a name="2.1.5"></a><b>Pentium (i586)</b></h4>	
				<p>Pentium (1993 рік. Intel відмовилася від номерних назв типу 8086, 80286 та ін., тому що не могла запатентувати числа) - перший суперскалярний і суперконвейерний процесор Intel. Суперскалярність - означає, що процесор дозволяє виконувати більше однієї операції за один такт. Суперконвейерність означає, що процесор має кілька обчислювальних конвеєрів. У Pentium їх два, що дозволяє йому при однакових частотах в ідеалі бути вдвічі продуктивніше 486, виконуючи відразу 2 інструкції за такт. Крім того, особливістю процесора Pentium був повністю перероблений і дуже потужний на той час блок FPU, продуктивність якого залишалася недосяжною для конкурентів аж до кінця 1990-х років.</p>
				<h4 class="h-left"><a name="2.1.6"></a><b>Pentium II (i686)</b></h4>	
				<p>Pentium II (травень 1997 роки) - модифікація ядра Pentium Pro з метою зробити його більш доступним. Інтегрований кеш і тег кеша були винесені на окремі мікросхеми зі зниженою в два рази частотою. Це спростило і здешевило процесор, хоча і зробило його більш повільним, ніж Pentium Pro. Перші процесори Pentium II випускалися з кеш-пам'яттю другого рівня ємністю 256 Кбайт, потім її обсяг був збільшений до 512 Кбайт. Нова конструкція процесора зажадала розміщення елементів на друкованій платі, що, в свою чергу, призвело до зміни конструктиву процесора. Дані ЦПУ випускалися у вигляді картриджів SECC, що встановлюються в спеціальний роз'єм на платі (Slot 1). Крім того, в ядро ​​Pentium II був доданий блок MMX.</p>
				<h4 class="h-left"><a name="2.1.7"></a><b>Celeron</b></h4>
				<figure class="float-right">
					<a href="cp_Celeron.html"><img src="../img/Celeron.jpg" alt="" width="250px" height="200px"></a>
					<figcaption>Рис. 5. Intel Celeron.</figcaption>
				</figure>
				<p>Celeron - спрощена модифікація процесорів Pentium II / III / IV / Core / Core 2 для побудови недорогих комп'ютерів. Перший Celeron (ядро Covington, частоти 266/300 МГц) був Pentium II, позбавлений кеша другого рівня і пластикового картриджа. Друкована плата також була спрощена. Така упаковка отримала назву SEPP (Single Edge Processor Package). В результаті ці процесори демонстрували гнітюче низьку продуктивність, хоча коштували дуже недорого і легко додавали до 50% частоти при розгоні. Усі наступні варіанти цього процесора мали інтегрований полночастотний кеш другого рівня. Основні відмінності процесорів Celeron в обсязі цього кеша і частоті шини, а також часто в збільшеною латентності доступу до кеш-пам'яті по відношенню до оригінального процесору (див. Рис 5).</p>
				<p>Друга модифікація Celeron (ядро Mendocino, частоти 300 ... 533 МГц) на багатьох завданнях демонструвала більш високу продуктивність, ніж рівночастотний Pentium II. Це пояснювалося тим, що маленький (128 Кбайт) кеш Mendocino розташовувався на одному кристалі з ядром і працював на частоті ядра, в той час як великий (512 Кбайт) кеш Pentium II перебував досить далеко від ядра і працював на половинній частоті. Більше таких промахів фірма Intel не допускала, і всі наступні Celeron гарантовано повільніше повноцінних процесорів того ж покоління.</p>
				<h4 class="h-left"><a name="2.1.8"></a><b>Pentium III (i686)</b></h4>	
				<p>Pentium III, виготовлений спочатку по технологічному процесу 0,18 мкм, відрізняється від P2 головним чином додаванням інструкцій SSE. Пізні процесори цієї серії виготовлялися за технологічним процесом 0.13 мкм, отримали інтегровану в кристал ядра полночастотну кеш-пам'ять (спочатку 256 Кбайт, потім - 512 Кбайт) і послужили прообразом процесорів архітектури Pentium M. Випускалися в конструктивах як SECC / SECC2 (Slot 1 ), так і FCPGA-370 (PGA-370).</p>
				<h4 class="h-left"><a name="2.1.9"></a><b>Pentium 4</b></h4>	
				<figure class="float-right">
					<a href="cp_Pentium_4.html"><img src="../img/Pentium_4.jpg" alt="" width="200px" height="200px"></a>
					<figcaption>Рис. 6. Intel Pentium 4.</figcaption>
				</figure>
				<p>Pentium 4 - принципово новий процесор з гіперконвейерізаціей (hyperpipelining) - з конвеєром, що складається з 20 ступенів. Відповідно до заяв Intel, процесори, засновані на даній технології, дозволяють домогтися збільшення частоти приблизно на 40% щодо сімейства P6 при однаковому технологічному процесі (при «правильному» завантаженні процесора). На практиці ж, перше покоління процесорів працювало навіть повільніше, ніж Pentium III. Пізніше були доповнені підтримкою Hyper-threading і 64-бітного коду (див. Рис. 6).</p>
				<h4 class="h-left"><a name="2.1.10"></a><b>Core / Core 2</b></h4>	
				<figure class="float-right">
					<a href="cp_Core_2_Duo.html"><img src="../img/Core_2_Duo.jpg" alt="" width="200px" height="200px"></a>
					<figcaption>Рис. 7. Intel Core 2 Duo.</figcaption>
				</figure>
				<p>Після провалу останнього покоління процесорів Pentium 4 на ядрі Tejas, було вирішено звернутися до іншої гілки продукції. В основі нових процесорів лежить перероблене ядро ​​Pentium M. Таким чином, ядро ​​P6, використане ще в процесорах Pentium Pro, продовжило свою еволюцію, наростивши частоту з 150 МГц до 3,2 ГГц і обзавівшись новою системною шиною, підтримкою багатоядерності, мультимедійних інструкцій (див . Рис. 7). Процесори Core - рішення для ноутбуків, одно- і двоядерні, які виконують 32-бітний код. Процесори Core 2 - випускаються як в настільному, так і мобільному виконанні, включають ряд мікроархітектурних поліпшень і здатні виконувати 64-бітний код. Кількість ядер варіюється від одного до чотирьох.</p>
				<h4 class="h-left"><a name="2.1.11"></a><b>Core i7/Core i5/Core i3</b></h4>	
				<p>Подальший розвиток ідей, закладених в процесорах Core 2. Зберігши основну конструкцію процесорних ядер, що з'явився першим Core i7 отримав модульну структуру, що дозволяє легко варіювати їх кількість, вбудований контролер пам'яті (трьохканальний DDR3 у вищому сегменті і двоканальної DDR3 в масовому) і нову шину, яка з'єднує процесор з чіпсетом. Мікроархітектурні поліпшення дозволяють Core i7 показувати підвищену продуктивність в порівнянні з Core 2 на рівних частотах. Велика увага була приділена питанню енергоефективності нового процесора. Пізніше з'явилися більш дешеві Core i5 / i7 з двоканальним контролером пам'яті і чотирма ядрами, потім - Core i3 / i5 з двома ядрами і вбудованим відеоядром. У секторі найбільш продуктивних рішень випускаються також процесори Core i7 з трьохканальним контролером пам'яті і шістьма ядрами. Завдяки використанню технології Hyper-threading ці процесори здатні одночасно виконувати до 12 потоків команд. Також в асортименті компанії Intel є особливо продуктивні процесори для домашніх ПК: Core i7 з трьохканальним контролером пам'яті і вісьмома ядрами. Кількість потоків зросла до 16.</p>
				<h4 class="h-left"><a name="2.1.12"></a><b>Xeon</b></h4>	
				<p>Сімейство процесорів, орієнтованих на сервери і багатопотокові обчислення. Перший представник цього сімейства базувався на архітектурі Pentium II, був картдрідж з друкованою платою, на якій монтувалося ядро, кеш-пам'ять другого рівня і тег кеша. Монтувався в гніздо Slot 2. Сучасні Xeon базуються на архітектурі Core 2 / Core i7.</p>
				<h3><a name="2.2"></a>Процесори AMD</h3>
				<h4 class="h-left"><a name="2.2.1"></a><b>Am8086/Am8088/Am186/Am286/Am386/Am486</b></h4>
				<figure class="float-right">
					<a href="cp_Am386.html"><img src="../img/Am386.jpg" alt="" width="200px" height="200px"></a>
					<figcaption>Рис. 8. Am386.</figcaption>
				</figure>
				<p>Клони відповідних процесорів від Intel. Зазвичай випускалися з максимальною частотою на сходинку вище, ніж в оригіналу. Так, Am386DX випускався з максимальною частотою 40 МГц, тоді як i386DX - 33 МГц. Аж до 486DX2-66 інших відмінностей між процесорами не було. Програмно відрізнити ці процесори було неможливо. 5x86 Клон i486. У той час, як Intel для i486 зупинився на частоті 100 МГц, AMD випускала процесори з частотами до 133 МГц. Також вони відрізнялися збільшеним об'ємом кеша першого рівня (16 Кбайт) і множником (× 4). (Див. Рис. 8)</p>
				<h4 class="h-left"><a name="2.2.2"></a><b>K6</b></h4>	
				<p>Принципово новий процесор AMD (квітень 1997 року), заснований на ядрі, придбаному у NexGen. Даний процесор мав конструктив п'ятого покоління, проте ставився до шостого покоління і позиціонувався як конкурент Pentium II. Включав в себе блок MMX і кілька перероблений блок FPU. Однак дані блоки все одно працювали на 15-20% повільніше, ніж у аналогічних за частотою процесорів Intel. Процесор мав 64 Кбайт кеша першого рівня. В цілому, порівнюя з Pentium II продуктивність, сумісність зі старими материнськими платами і більш ранній старт (AMD представила К6 на місяць раніше, ніж Intel представила P-II) і більш низька ціна зробили його досить популярним, однак проблеми з виробництвом у AMD значно зіпсували репутацію даного процесора.</p>
				<h4 class="h-left"><a name="2.2.3"></a><b>Athlon</b></h4>
				<p>Дуже успішний процесор, завдяки якому фірма AMD зуміла відновити майже втрачені позиції на ринку мікропроцесорів. Кеш першого рівня - 128 Кбайт. Спочатку процесор випускався в картриджі з розміщенням кеша другого рівня (512 Кбайт) на платі і встановлювався в роз'єм Slot A (який механічно, але не електрично сумісний зі Slot 1 від Intel). Потім перейшов на роз'єм Socket A і мав 256 Кбайт кеша другого рівня в ядрі. За швидкодією - приблизний аналог Pentium III. Duron урізана версія Athlon, відрізняється від батька об'ємом кеша другого рівня (всього 64 Кбайт, зате інтегрованим в кристал і працюючим на частоті ядра). Конкурент Celeron поколінь Pentium III / Pentium 4. Продуктивність помітно вище, ніж у аналогічних Celeron, і при виконанні багатьох завдань відповідає Pentium III.</p>
				<h4 class="h-left"><a name="2.2.4"></a><b>Athlon 64</b></h4>	
				<p>Перший несерверний процесор, що підтримує архітектуру x86-64.</p>
				<h4 class="h-left"><a name="2.2.5"></a><b>Athlon 64 X2</b></h4>	
				<figure class="float-right">
					<a href="cp_Athlon64X2.html"><img src="../img/Athlon64X2.jpg" alt="" width="200px" height="200px"></a>
					<figcaption>Рис. 9. Amd Athlon 64 X2.</figcaption>
				</figure>
				<p>Продовження архітектури Athlon 64, має 2 обчислювальних ядра. (Див. Рис. 9)</p>
				<h4 class="h-left"><a name="2.2.6"></a><b>Phenom</b></h4>	
				<p>Подальший розвиток архітектури Athlon 64, випускається у варіантах з двома (Athlon 64 X2 Kuma), трьома (Phenom X3 Toliman) і чотирма (Phenom X4 Agena) ядрами.</p>
				<h4 class="h-left"><a name="2.2.7"></a><b>Phenom II</b></h4>	
				<p>Модифікація Phenom. Невеликі архітектурні зміни, перехід на більш тонкий технологічний процес і додавання кешу L3 об'ємом від 4 до 6 Мбайт дозволили наростити продуктивність цих процесорів на 10-20% в порівнянні з попередниками. Випускаються в конструктивах Socket AM2 + і Socket AM3. При цьому перші можуть працювати тільки з пам'яттю DDR2, а другі - як з DDR2, так і з DDR3. Максимальне число ядер зросла до шести.</p>
				<h4 class="h-left"><a name="2.2.8"></a><b>Athlon II</b></h4>	
				<p>Phenom II без кешу L3 і кількістю ядер не більше чотирьох.</p>
				<h3><a name="2.3"></a>Процесори, що випускалися в СРСР і Росії</h3>	
				<h4 class="h-left"><a name="2.3.1"></a><b>КР1810ВМ86</b></h4>	
				<figure class="float-right">
					<a href="cp_R1000.html"><img src="../img/R1000.png" alt="" width="200px" height="200px"></a>
					<figcaption>Рис. 10. МЦСТ R1000.</figcaption>
				</figure>
				<p>КР1834ВМ86 / ЕКР1834ВМ86 - аналог 8086. К1810ВМ88 - аналог 8088. КФ1847ВМ286 (пізніше ЕКФ1847ВМ2) - аналог 80286. Дослідні зразки випускалися заводом імені Дзержинського (розробник НТЦ «Белмікросістеми») НВО «Інтеграл».</p>
				<h4 class="h-left"><a name="2.3.2"></a><b>Процесори МЦСТ</b></h4>	
				<p>Компанією ЗАТ МЦСТ випущена серія мікропроцесорів «Ельбрус», що дозволяють працювати в режимі двійковій сумісності з архітектурою x86. Сумісність забезпечується за рахунок програмної динамічної трансляції x86-кодів з використанням апаратної підтримки, закладеної в архітектуру мікропроцесора «Ельбрус». (Див. Рис. 10)</p>
				<h2><a name="3"></a>Відомості загального характеру</h2>	
				<h3><a name="3.1"></a>Поняття архітектури</h3>
				<h4 class="h-left"><a name="3.1.1"></a><b>Архітектура як сумісність з кодом</b></h4>
				<p>Напевно ви часто зустрічалися з терміном "x86", або «Intel-сумісний процесор» (або «IBM PC compatible» - але це вже по відношенню до комп'ютера). Іноді також зустрічається термін «Pentium-сумісний». Що за всіма цими назвами ховається насправді? На даний момент найбільш коректно з точки зору автора виглядає наступне просте формулювання: сучасний x86-процесор - це процесор, здатний коректно виконувати машинний код архітектури IA32 (архітектура 32-бітових процесорів Intel). У першому наближенні це код, виконуваний процесором i80386 (відомим в народі як «386-й»), остаточно ж основний набір команд IA32 сформувався з виходом процесора Intel Pentium Pro. Що означає «основний набір» і які є ще? Для початку відповімо на першу частину питання. «Основний» в даному випадку означає те, що за допомогою виключно цього набору команд, може бути написана будь-яка програма, яка взагалі може бути написана для процесора архітектури x86 (або IA32, якщо вам так більше подобається).</p>
				<p>Крім того, у архітектури IA32 існують «офіційні» розширення (додаткові набори команд) від розробника самої архітектури, компанії Intel: MMX, SSE, SSE2 і SSE3. Також існують «неофіційні» (чи не від Intel) розширені набори команд: EMMX, 3DNow! і Extended 3DNow! - їх розробила компанія AMD. Втім, «офіційність» і «неофіційність» в даному випадку поняття відносне - де-факто все зводиться до того, що деякі розширення набору команд Intel як розробник початкового набору визнає, а деякі - ні, розробники ж програмного забезпечення використовують те, що їм краще всього підходить. Відносно розширених наборів команд існує одне просте правило хорошого тону: перш ніж їх використовувати, програма повинна перевірити, чи підтримує їх процесор. Іноді відступу від цього правила зустрічаються (і можуть призводити до неправильного функціонування програм), але об'єктивно це є проблемою некоректно написаного програмного забезпечення, а не процесора.</p>
				<p>Для чого призначені додаткові набори команд? В першу чергу - для збільшення швидкодії при виконанні деяких операцій. Одна команда з додаткового набору, як правило, виконує дію, для якого знадобилася б невелика програма, що складається з команд основного набору. Знову-таки, як правило, одна команда виконується процесором швидше, ніж замінює її послідовність. Однак в 99% випадків, нічого такого, чого не можна було б зробити за допомогою основних команд, за допомогою команд з додаткового набору зробити не можна.</p>
				<p>Таким чином, згадана вище перевірка програмою підтримки додаткових наборів команд процесором, повинна виконувати дуже просту функцію: якщо, наприклад, процесор підтримує SSE - значить, вважати будемо швидко і за допомогою команд з набору SSE. Якщо ні - будемо вважати повільніше, за допомогою команд з основного набору. Коректно написана програма повинна діяти саме так. Втім, зараз практично ніхто не перевіряє у процесора наявність підтримки MMX, так як всі CPU, що вийшли за останні 5 років, цей набір підтримують гарантовано. Для довідки наведемо табличку, на якій узагальнено інформацію про підтримку різних розширених наборів команд різними десктопними (призначеними для настільних ПК) процесорами.</p>
				<h4 class="h-left"><a name="3.1.2"></a><b>Відмінності між ядрами однієї мікроархітектури</b></h4>	
				<p>«Процесорне ядро» (як правило, для стислості його називають просто «ядро») - це конкретне втілення [мікро] архітектури (тобто «архітектури в апаратній сенсі цього слова»), що є стандартом для цілої серії процесорів. Наприклад, NetBurst - це мікроархітектура, яка лежить в основі багатьох сьогоднішніх процесорів Intel: Celeron, Pentium 4, Xeon. Мікроархітектура задає загальні принципи: довгий конвеєр, використання певного різновиду кеша коду першого рівня (Trace cache), інші «глобальні» особливості. Ядро - більш конкретне втілення. Наприклад, процесори мікроархітектури NetBurst з шиною 400 МГц, кешем другого рівня 256 кілобайт, і без підтримки Hyper-Threading - це більш-менш повний опис ядра Willamette. А ось ядро ​​Northwood має кеш другого рівня вже 512 кілобайт, хоча також засновано на NetBurst. Ядро AMD Thunderbird засноване на мікроархітектурі K7, але не підтримує набір команд SSE, а ось ядро ​​Palomino - вже підтримує. Таким чином, можна сказати що «ядро» - це конкретне втілення певної мікроархітектури «в кремнії», що володіє (на відміну від самої мікроархітектури) певним набором строго обумовлених характеристик. Мікроархітектура - аморфна, вона описує загальні принципи побудови процесора. Ядро - конкретне, це мікроархітектура, «обросла» всілякими параметрами і характеристиками. Надзвичайно рідкісні випадки, коли процесори змінювали микроархитектуру, зберігаючи назву. І, навпаки, практично будь-яке найменування процесора хоча б кілька разів за час свого існування «змінювало» ядро. Наприклад, загальна назва серії процесорів AMD - «Athlon XP» - це одна мікроархітектура (K7), але цілих чотири ядра (Palomino, Thoroughbred, Barton, Thorton). Різні ядра, побудовані на одній мікроархітектурі, можуть мати, в тому числі різну швидкодію.</p>
				<h4 class="h-left"><a name="3.1.3"></a><b>Частота роботи ядра</b></h4>
				<p>Як правило, саме цей параметр в просторіччі називають «частотою процесора». Хоча в загальному випадку визначення «частота роботи ядра» все ж більш коректно, так як абсолютно не обов'язково всі складові CPU функціонують на тій же частоті, що і ядро ​​(найбільш частим прикладом зворотного були старі «слотові» x86 CPU - Intel Pentium II і Pentium III для Slot 1, AMD Athlon для Slot A - у них L2-кеш функціонував на 1/2, і навіть іноді на 1/3 частоти роботи ядра). Ще одним поширеним помилкою є впевненість в тому, що частота роботи ядра однозначним чином визначає продуктивність. Насправді це двічі не так: по-перше, кожне конкретне процесорне ядро ​​(в залежності від того, як воно спроектовано, скільки містить виконуючих блоків різних типів, і т.д. і т.п.) може виконувати різну кількість команд за один такт, частота ж - це всього лише кількість таких тактів в секунду. Таким чином (наведене далі порівняння, зрозуміло, дуже сильно спрощено і тому вельми умовно) процесор, ядро ​​якого виконує 3 інструкції за такт, може мати на третину меншу частоту, ніж процесор, виконуючий 2 інструкції за такт - і при цьому мати повністю аналогічну швидкодію .</p>
				<p>По-друге, навіть в рамках одного і того ж ядра, збільшення частоти зовсім не завжди призводить до пропорційного збільшення швидкодії. Справа в тому, що швидкість виконання команд ядром процесора - це зовсім не єдиний показник, що впливає на швидкість виконання програми. Не менш важлива швидкість надходження команд і даних на CPU. Уявімо собі чисто теоретично таку систему: швидкодія процесора - 10'000 команд в секунду, швидкість роботи пам'яті - 1000 байт в секунду. Таким чином, слід розуміти: неможливо безперервно нарощувати одну тільки частоту ядра, що не прискорюючи одночасно підсистему пам'яті, так як в цьому випадку починаючи з певного етапу, збільшення частоти CPU перестане позначатися на збільшенні швидкодії системи в цілому.</p>
				<h4 class="h-left"><a name="3.1.4"></a><b>Кодування інструкцій</b></h4>	
				<p>Префікси (кожен з них опціональний):</p>
				<ul class="ul">
					<li>Однобайтовий префікс зміни режиму адресації AddressSize (значення 67h (між іншим, що h - це позначення шестнадцатирічного запису, тут і далі)).</li>
					<li>Однобайтовий префікс зміни сегмента Segment (значення 26h, 2Eh, 36h, 3Eh, 64h і 65h).</li>
					<li>Однобайтовий префікс BranchHint для вказівки кращою гілки переходу (значення 2Eh і 3Eh).</li>
					<li>Двухбайтовий або трьохбайтовий складнострукурованих префікс Vex (перший байт завжди має значення C4h для двухбайтового варіанту або C5h для трёхбайтового).</li>
					<li>Однобайтовий префікс Lock для заборони модифікації пам'яті іншими процесорами або ядрами (значення F0h).</li>
					<li>Однобайтовий префікс OperandsSize для зміни розміру операнда (значення 66h).</li>
					<li>Однобайтовий префікс Mandatory для уточнення інструкції (значення F2h і F3h).</li>
					<li>Однобайтовий префікс Repeat означає повторення (значення F2h і F3h).</li>
					<li>Однобайтовий структурований префікс Rex потрібен для вказівки 64-бітних або розширених регістрів (має значення 40h..4Fh).</li>
					<li>Префікс Escape. Завжди складається як мінімум з одного байта 0Fh. За цим байтом опціонально йде байт 38h або 3Ah. Призначений для уточнення інструкції.</li>
				</ul>
				<p>Вбудовані в інструкцію дані (опційні):</p>
				<ul class="ul">
					<li>Зсув або адреса в пам'яті (Displacement). Ціле число зі знаком розміром 8, 16, 32 або 64 біта.</li>
					<li>Перший або єдиний безпосередній операнд (Immediate). Може бути розміром 8, 16, 32 або 64 біта.</li>
					<li>Другий безпосередній операнд (Immediate2). Якщо присутній, то зазвичай має розмір в 8 біт.</li>
				</ul>
				<p>У списку вище і далі для технічних імен прийнято найменування «тільки латиниця, арабські цифри» і знак мінуса «-» зі знаком підкреслення «_», а регістр - CamelCase (будь-яке слово починається з великої, а далі тільки рядкові навіть якщо абревіатура: « UTF-8 »→« Utf8 »- всі слова разом). Префікси AddressSize, Segment, BranchHint, Lock, OperandsSize і Repeat можуть бути перемішані між собою. Інші елементи повинні йти саме в зазначеному порядку. І видно що байтові значення деяких префіксів збігаються. Їх призначення та наявність визначає вже сама інструкція. Префікси перевизначення сегмента можуть застосовуватися з більшістю інструкцій, а префікси BranchHint застосовуються тільки з інструкціями умовного переходу. Аналогічна ситуація з префіксами Mandatory і Repeat - десь вони уточнюють інструкцію, а десь вказують на повторення. Префікс OperandSize разом в префіксами Mandatory ще відносять до префіксам SIMD-інструкції. Окремо слід сказати про префікс Vex. Він замінює префікси Rex, Mandatory, Escape і OperandsSize, компактизуя їх в собі. З ним не допустимо використання префікса Lock. Сам же префікс Lock може додаватися коли приймачем є операнд в пам'яті.</p>
				<p>Оглядовий список всіх цікавлячих режимів з точки зору кодування інструкцій:</p>
				<ul class="ul">
					<li>16-бітний («Real Mode», реальний режим із сегментною адресацією).</li>
					<li>32-битный («Protected Mode», захищений режим з плоскою моделлю пам'яті).</li>
					<li>64-бітний («Long Mode», як 32-бітний захищений з плоскою моделлю пам'яті, але адреси вже 64-бітові).</li>
				</ul>
				<p>У дужках англійські назви режимів відповідають офіційним. Ще є синтетичні режими начебто нереальні (Unreal x86 Mode), але вони всі випливають з цих трьох (по суті це гібриди, які відрізняються лише розміром адреси, операндів та іншим). У кожному з них використовується «рідний» режим адресації, але його можна змінити на альтернативний префіксом OperandsSize. У 16-бітному режимі включиться 32-бітний режим адресації, в 32-бітному режимі - 16-бітний, а в 64-бітному - 32-бітний. Але якщо це робити, то адреса розширюється з доповненням нулями (якщо він менше) або ж його старші біти скидаються (якщо він більше).</p>
				<h3><a name="3.2"></a>Дизайн</h3>	
				<p>Архітектура x86 використовує CISC набір команд зі змінною довжиною інструкції. Доступ до пам'яті за розміром слова також можуть бути не вирівняні по межі слова адреси пам'яті. Слова в Little Endian зберігаємого напрямку. Easy портативність Intel 8085 на асемблері код був рушійною силою розвитку архітектури. Це викликало деякі неоптимальні і проблематичні в ретроспективі проектні рішення.</p>
				<p>Сучасні x86 процесори гібридні процесори CISC / RISC, так як вони переводять інструкції x86 встановити перший в RISC - інструкції -Mikro постійної довжини, можуть бути застосовані до сучасної мікроархітектури оптимізацій. Передача спочатку до так званого резервування, тобто для малих буферів, вище по потоку від різних обчислювальних пристроїв. Перший гібридний процесор x86 був Pentium Pro.</p>
				<h4 class="h-left"><a name="3.2.1"></a><b>64 біта</b></h4>	
				<p>Intel спочатку хотіли зробити стрибок до 64 біт з новою архітектурою процесора під назвою IA-64, проте, вдалося встановити їх тільки в якості продукту ніші в сегменті ринку серверів і робочих станцій. AMD, з іншого боку продовжили 32-бітну архітектуру процесора до 64 біт і назвали це розширення AMD64. Пізніше Intel взяла на себе більшу частину цього розширення під назвою EM64T, а потім, нарешті, назву Intel 64.</p>
				<p>Для 64-розрядних процесорів, які засновані на архітектурі x86, термін x86-64 або незабаром x64 використовується.</p>
				<h4 class="h-left"><a name="3.2.2"></a><b>Віртуалізація</b></h4>		
				<p>Незважаючи на те, віртуалізації процесорів x86 ускладнюється - за повної архітектури, є кілька продуктів, які забезпечують віртуальний процесор x86 доступні, в тому числі VMware, Hyper-V і Virtual PC або з відкритим вихідним кодом програмного забезпечення, таких як Xen або VirtualBox. Віртуалізація апаратна сторона також доступна в якості розширення, він буде на Intel "Intel VT" (для технології віртуалізації), з AMD "AMD Virtualization".</p>
				<h3><a name="3.3"></a>Режими роботи</h3>	
				<h4 class="h-left"><a name="3.3.1"></a><b>Реальний режим</b></h4>		
				<p>У реальному режимі при обчисленні лінійної адреси, за якою процесор збирається читати вміст пам'яті або писати в неї, сегментна частина адреси множиться на 16 (або, те ж саме, що і зсув вліво на 4 бита) і підсумовується зі зміщенням (якщо процесору передається не повна адреса з двох 16-бітних значень - сегмента і зміщення, - а тільки 16-бітовий зсув, то сегмент береться з одного з сегментних регістрів). Таким чином, адреси 0400h: 0001h і 0000h: 4001h посилаються на одну і ту й ж саму фізичну адресу, так як 400h × 16 + 1 = 0 × 16 + 4001h.</p>
				<p>Такий спосіб обчислення фізичної адреси дозволяє адресувати 1 Мб + 64 Кб - 16 байт пам'яті (діапазон адрес 0000h ... 10FFEFh). Однак в процесорах 8086/8088 всього 20 адресних ліній, тому реально доступний тільки 1 мегабайт (діапазон адрес 0000h ... FFFFFh), а при адресації вище (в діапазоні 100000h ... 10FFEFh) відбувається «заворот» - старший одиничний біт адреси ігнорується і відбувається звернення до 64 кілобайт в початкових адресах (0000h ... FFEFh).</p>
				<p>Процесор 80286 має 24-бітну адресну шину (можлива адресація 224 = 16 Мб пам'яті), тому в них переповнення не відбувається. Комп'ютери IBM PC / AT побудовані на процесорі Intel 80286, але, з міркувань сумісності з IBM PC і IBM PC / XT, побудованих на Intel 808x, в них був введений логічний елемент (вентиль), що керує роботою 21-го адресного дроту (A20) . Цей логічний елемент, який отримав назву "Gate A20", за замовчуванням відключений, що відповідає режиму сумісності, але управляється через контролер клавіатури (мікросхема Intel 8042).</p>
				<h4 class="h-left"><a name="3.3.2"></a><b>Лінійна адресація пам'яті</b></h4>	
				<figure class="float-right">
					<a href="Linear_addressing.html"><img src="../img/Linear_addressing.png" alt="" width="400px" height="400px"></a>
					<figcaption>Рис. 11. Схема утворення лінійного адресного простору.</figcaption>
				</figure>
				<p>Лінійна адресація пам'яті - схема адресації пам'яті комп'ютера в захищеному режимі (починаючи з Intel 80386 і інших сумісних x86-процесорах). Використовується більшістю сучасних багатозадачних ОС. (Див. Рис. 11)</p>
				<p>Завдяки механізму лінійної адресації можна створювати будь-яку (обмежене тільки розмірами оперативної пам'яті) кількість незалежних віртуальних адресних просторів. Причому кожна сторінка лінійного адресного простору може перебувати по будь-якій фізичній адресою або навіть бути вивантажені на диск.</p>
				<p>При використанні лінійної адресації 32-розрядний логічний адрес ділиться на три частини:</p>
				<ul class="ul">
					<li>Номер запису в каталозі сторінок (номер таблиці сторінок) - біти 31-22 (10 біт). Один запис з каталогу сторінок визначає відображення 4 МБайт адресного простору.</li>
					<li>Номер запису в таблиці сторінок (номер сторінки в таблиці сторінок) - біти 21-12 (10 біт). Одна запис з таблиці сторінок визначає відображення 4 КБ адресного простору.</li>
					<li>Зсув в рамках сторінки - біти 11-0 (12 біт).</li>
				</ul>
				<h4 class="h-left"><a name="3.3.3"></a><b>Захищений режим</b></h4>	
				<p>На додаток до реального режиму Intel 80286 підтримує захищений режим, розширення адресацією фізичної пам'яті до 16 МБ і адресуємої віртуальної пам'яті до 1 Гб, а також надання захищеної пам'яті, яка запобігає програми від розтлінного один від одного. Це робиться за допомогою сегментних регістрів тільки для зберігання індексу в таблиці дескрипторів, яка зберігається в пам'яті. Є дві такі таблиці, тим Глобальна таблиця дескрипторів (GDT) і таблиця дескрипторів Local (LDT), кожна з яких містить до 8192 дескрипторів сегментів, кожен сегмент дає доступ до 64 Кбайт пам'яті. В 80286, дескриптор сегмента забезпечує 24-бітну в базовий адреса, і цей базовий адрес додається до 16-бітовим зміщенням, щоб створити абсолютну адресу. Базова адреса з таблиці виконує ту ж роль, що буквальне значення регістра сегмента виконує в режимі реального часу; сегментні регістри були перетворені з прямих регістрів непрямих регістрів. Кожен сегмент може бути призначений один з чотирьох кільцевих рівнів, використовуваних для апаратної комп'ютерної безпеки. Кожен дескриптор сегмента містить також граничне поле сегмента, який визначає максимальний зсув, яке може бути використано з сегментом. Оскільки Зміщення 16 біт, сегменти , як і раніше обмежені до 64 Кбайт кожен в 80286 захищеному режимі.</p>
				<p>Суть захищеного режиму в наступному: програміст і програми, що їм розроблються використовують логічний адресний простір, розмір якого може становити 1 гігабайт. Логічна адреса перетворюється в фізичну адресу автоматично за допомогою схеми управління пам'яттю (MMU). При цьому вміст сегментного регістра не пов'язаний безпосередньо з фізичною адресою, а є номером сегмента у відповідній таблиці. Завдяки захищеному режиму, в пам'яті може зберігатися тільки та частина програми, яка необхідна в даний момент, а інша частина може зберігатися в зовнішній пам'яті (наприклад, на жорсткому диску). У разі звернення до тієї частини програми, якої немає в пам'яті в даний момент, операційна система може призупинити програму, завантажити необхідну секцію коду з зовнішньої пам'яті і відновити виконання програми. Отже, стають допустимими програми, розмір яких більше обсягу наявної пам'яті, і користувачеві здається, що він працює з більшою пам'яттю, ніж насправді.</p>
				<p>Фізична адреса формується таким чином. В сегментних регістрах зберігається селектор, що містить індекс дескриптора в таблиці дескрипторів (13 біт), 1 біт, що визначає до якої таблиці дескрипторів буде проводитися звернення (до локальної або до глобальної) і 2 біти запитуваної рівня привілеїв. Далі відбувається звернення до відповідної таблиці дескрипторів і відповідного дескриптора, який містить початкову 24-бітову адресу сегмента, розмір сегмента і права доступу, після чого обчислюється необхідний фізичний адрес шляхом складання адреси сегмента зі зміщенням з 16-розрядного регістра.</p>
				<h4 class="h-left"><a name="3.3.4"></a><b>Режим віртуального 8086</b></h4>
				<p>Існує також суб-режим роботи в захищеному режимі 32-біт (так званий 80386 захищений режим) називається віртуальний режим 8086, також відомий як режим V86. Це в основному спеціальний гібрид робочий режим, що дозволяє програмам реального режиму і операційні системи для запуску в той час як під контролем супервізора операційної системи захищеному режимі. Це дозволяє більшу гнучкість в управлінні як програми для захищеного режиму і програм реального режиму одночасно. Цей режим призначений виключно для 32-розрядної версії захищеного режиму; вона не існує в 16-бітової версії захищеного режиму, або в тривалому режимі.</p>
			</div>	  
		</main>
		<footer class="footer"><div>© 2017 Боровик М.В.</div></footer>
	</div>
	<a href="#" class="scrollup">Scroll</a> 
</body>
</html>